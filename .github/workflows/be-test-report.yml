name: "Backend Test Report"

on:
  workflow_run:
    workflows: ["Check Backend Pull Request"]
    types:
      - completed

jobs:
  be-report:
    name: Backend test report
    runs-on: ubuntu-latest

    steps:
      - name: 📁 Download test results
        uses: actions/download-artifact@v3
        with:
          name: be-test-results
      - name: 📋 Publish test results
        uses: dorny/test-reporter@v1
        with:
          name: Test Results
          path: reports/jest-*.xml
          reporter: jest-junit
      - name: 📋 Publish coverage
        uses: ArtiomTr/jest-coverage-report-action@v2
        id: coverage
        with:
          output: report-markdown
          coverage-file: coverage/report.json
